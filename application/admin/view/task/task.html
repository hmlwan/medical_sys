{extend name="layout/main" /}

{block name="header"}

{/block}

{block name="content"}
<section class="panel">
    <header class="panel-heading">
        <h4>每日签到</h4>
    </header>
    <div class="panel-body" style="padding-bottom: 50px">
        <div class="form-group">
                
                <a type="button" href="/admin/Task/taskadd" class="btn btn-info">添加任务</a>
            </div>
        <table class="table table-bordered table-striped no-margin">
            <thead>
            <tr>
                <th class="text-center">序号</th>
                <th class="text-center">名称</th>
                <th class="text-center">图标</th>
                <th class="text-center">奖励范围</th>
                <th class="text-center">完成次数/个数</th>
                <th class="text-center">奖励倍数</th>
                <!--<th class="text-center">跳转链接</th>-->
                <!--<th class="text-center">状态</th>-->
                <th class="text-center">邀请直推下线开关</th>
                <th class="text-center">操作</th>
            </tr>
            </thead>
            <tbody>
            {foreach $list as $key=>$config}
            <tr>
                <td class="text-center" style="vertical-align: middle; ">{$config->id}</td>
                <td class="text-center" style="vertical-align: middle; ">
                    {$config->task_name}
                </td>
                <td class="text-center" style="vertical-align: middle; ">
                
                     <img src="{$config->img}" alt="" style="width:80px;height: 80px">

                </td>
                <td class="text-center" style="vertical-align: middle; ">
                    {$config->reward_remark}
                </td>
                <td class="text-center" style="vertical-align: middle; ">
                    {$config->complete_num}
                </td>
                <td class="text-center" style="vertical-align: middle; ">
                    {$config->reward_rate}
                </td>
                <!--<td class="" style="vertical-align: middle;width: 200px ">-->
                    <!--{$config->url}-->
                <!--</td>-->
                <!--<td class="text-center" style="vertical-align: middle; ">-->
                    <!--{if $config->status == '1'}-->
                        <!--开启-->
                    <!--{else /}-->
                        <!--关闭-->
                    <!--{/if}-->
                <!--</td>-->
                <td class="text-center" style="vertical-align: middle; ">
                {if $config->invite_sub_switch == '1'}
                    开启
                {else /}
                    关闭
                {/if}
                </td>
                <td class="text-center" style="vertical-align: middle; ">
                    <a class="btn btn-xs btn-primary" href="/admin/Task/sladds2?id={$config->id}">确认修改</a>
                    {if $config->invite_sub_switch == 1}
                        <a class="btn btn-xs btn-danger" data-url="{:url('taskSwitch',['id'=>$config->id,'invite_sub_switch'=>0])}" onclick="main.ajaxDelete(this)" data-msg="确定关闭吗？">关闭</a>
                    {else /}
                        <a class="btn btn-xs btn-primary" data-url="{:url('taskSwitch',['id'=>$config->id,'invite_sub_switch'=>1])}" onclick="main.ajaxDelete(this)" data-msg="确定开启吗？">开启</a>
                    {/if}
                     <a data-url="{:url('deletes2',['id'=>$config->id])}" onclick="main.ajaxDelete(this)"
                       data-msg="确定要删除该吗？" class="btn btn-xs btn-danger">删除</a>
                    <!--<a class="btn btn-xs btn-primary" href="/admin/Task/taskDetail?id={$config->id}">查看奖励数值</a>-->

                </td>
            </tr>
            {/foreach}
            </tbody>
        </table>
    </div>
</section>
{/block}


{block name="footer"}
<script>
    function updateConfig(e) {
        var key = $(e).attr('data-key');
        var value = $("#" + key).val();
        $.post("{:url('config/save')}", {key: key, value: value}, function (data) {
            if (data.code == 1) {
                main.waringAlert(data.message);
            } else {
                main.waringAlert(data.message);
                window.location.reload();
            }
        }, 'json')
    }
</script>
{/block}